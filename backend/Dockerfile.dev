# Development Dockerfile for AdonisJS with hot reload
FROM node:24-slim

WORKDIR /app

# Install packages needed for building native modules
RUN apt-get update -qq && \
    apt-get install --no-install-recommends -y build-essential node-gyp pkg-config python-is-python3 && \
    rm -rf /var/lib/apt/lists/*

# Copy package files
COPY package*.json ./

# Install all dependencies (including dev)
RUN npm install

# Copy application code
COPY . .

# Expose the port
EXPOSE 3333

# Start development server with HMR
CMD ["npm", "run", "dev"]
